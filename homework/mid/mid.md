# 系統程式
***
## 組譯程式
### ●指引命令
    START   指定程式名字及設定程式的起始位址。
    END     程式結束，並可指定持式的執行起始位址。
    BYTE    字元或十六進制碼常數。
    WORD    產生一個字組常數。
    RESB    保留數個位元組以供資料操作。
    RESW    保留數個字組以提供資料操作。
### ●基本功能
    1. 將助記憶式指令轉換成相對應的機器碼。
    2. 將符號式運算元轉換成相對應的機器位址。
    3. 依電腦硬體格式產生相對應的機器指令。
    4. 將原始程式內定義的資料常數轉換成機器內部表示的型態。
    5. 輸出目的程式並列出組合語言。
由於某些虛擬指令僅會指示組譯程式做某些動作，並不產生機器碼。至於某些單純的指令，當其翻譯成機器碼後，仍可再還原為原來的指令，所以用組合語言所撰寫的原始程式經過組譯程式組譯成機器碼後，僅部分的原始程式可反組譯回來。
### ●類型
組譯程式依處理方式不同，大致可以分成三大類：
<pre>
    1. 一次處理組譯程式
        a. 載入並且執行
        b. 一次處理模組
    2. 兩次處理組譯程式
    3. 多次處理組譯程式
</pre>
#### 一次處理組譯程式
若程式中所有使用到的符號皆事先定義過，且沒有向前參考的情況，皆可用一次處理組合程式來處理。此類組譯程式有兩種：
<pre>
    a. 載入並且執行：
        此類組譯程式並不產生目的程式，而是<font color=red>直接產生絕對位址式的機器碼</font>，並且立即載入實際的記憶體中執行。載入並且執行組譯程式處理符號的方式則採用鏈結串列，當未定義的符號首次出現時，則將它加於符號表內，並註明上未定義；當此符號再次出現，則利用指標將它連接能來，並記錄此符號的出現位址值。
        ＜<font color=red>缺點</font>＞
        (1) 不具連結的能力：
            個別組譯的程式無法結合在一起，成為一個大程式。
        (2) 不具重定位的能力：
            程式必須在固定的記憶體未止組譯執行。
        (3) 須具備足夠的記憶體空間：
            因為組譯程式本身與機器碼都同時存在於記憶體中。
    b. 一次處理模組：
        此種組譯程式不若載入並且執行組譯程式，<font color=red>它並不產生機器碼，而是產生目的碼</font>，其中亦包含供連結程式及載入程式使用的資訊。其僅完成部分的組譯工作，其餘則交由載入程式處理。此組譯程式處理未定義的符號是以一個跳躍至某一位址的指令替代；即遇到未定義的符號，則將它的位址值加入跳前表中，且記錄它的符號及其出現的位址值，當再有相同的符號出現時，則用鏈結串列的方式將它的位址值串聯．此表格將供載入程式於載入時調整相對應的位址值。
</pre>
#### 兩次處理組譯程式
在做組譯工作時，會對原始程式做兩次掃瞄，所以允許程式中存在向前參考的未定義符號。典型的兩次處理組譯程式，<font color=red>其功能就是在第一次處理時產生一個中間檔案，而於第二次處理時讀取該中間檔案，並處理第一次處理未完成的工作</font>。兩次處理的功能如下：
<pre>
    1. 第一次處理：定義所有的符號與文字。
        a. 決定程式中所有敘述的位址。
        b. 儲存所有標籤的位址，供第二次處理使用。
        c. 處理程式中的虛擬指令。
    2. 第二次處理：輸出目的程式。
        a. 將指令組譯；及翻譯運算碼及符號位址的查詢。
        b. 產生DS, DC及文字所定義的值。
        c. 處理未處理的虛擬指令。
        d. 輸出目的程式並列出原始的組合語言程式。
</pre>